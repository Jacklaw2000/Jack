<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jack's Website</title>
    <link rel="stylesheet" href="/Jack/styles/styles.css">
</head>
<body>
    <h1>Jack's Website</h1>
    <a href="/Jack/financial/financial.html"target="_blank">Financial Section</a>
    <div class="segment">
    <a href="https://www.patient-services.co.uk/prescriptions"target="_blank">Prescription</a>
        </div>    
    <div class="segment">
        <a href="/Jack/recipes.html"target="_blank">Recipe Book</a>
        </div>
    <div class="segment">
        <a href="/Jack/nutrition.html"target="_blank">Nutrition Information</a>
        </div>   
    <div class="segment">
        <a href="/Jack/sleep.html"target="_blank">Sleep Information</a>
        </div>
    <div class="segment">
        <a href="https://github.com/Jacklaw2000/Jack/edit/main/database.html"target="_blank">Database</a>
        </div>          
    <p>Welcome</p>
    
    <div class="segment">
    <a href="https://www.timeanddate.com/sun/uk/aberdeen"target="_blank">Sun Graph</a>
        </div>
    
    <div class="segment">
        <h2>Sunrise: <span id="sunrise"></span></h2>
        <h2>Sunset: <span id="sunset"></span></h2>
        <h2>Daylight: <span id="daylight"></span></h2>
        <h2>Current Time: <span id="current-time"></span></h2>
        <h2>Weather: <span id="weather"></span></h2>
    </div>

    <script>
    navigator.geolocation.getCurrentPosition(success, error);

    function success(position) {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;

        // Sunrise/Sunset
        fetch(`https://api.sunrise-sunset.org/json?lat=${lat}&lng=${lng}&formatted=0`)
            .then(response => response.json())
            .then(data => {
            const sunrise = new Date(data.results.sunrise);
            const sunset = new Date(data.results.sunset);

            document.getElementById("sunrise").textContent = sunrise.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            document.getElementById("sunset").textContent = sunset.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

            const daylightDuration = (sunset - sunrise) / (1000 * 60); // minutes
            const hours = Math.floor(daylightDuration / 60);
            const minutes = Math.round(daylightDuration % 60);
            document.getElementById("daylight").textContent = `${hours} hours ${minutes} minutes`;
            });

        // Weather
        const apiKey = "eyJ4NXQjUzI1NiI6Ik5XVTVZakUxTkRjeVl6a3hZbUl4TkdSaFpqSmpOV1l6T1dGaE9XWXpNMk0yTWpRek5USm1OVEE0TXpOaU9EaG1NVFJqWVdNellXUm1ZalUyTTJJeVpBPT0iLCJraWQiOiJnYXRld2F5X2NlcnRpZmljYXRlX2FsaWFzIiwidHlwIjoiSldUIiwiYWxnIjoiUlMyNTYifQ==.eyJzdWIiOiJKYWNrLmxhd0BsaXZlLmNvLnVrQGNhcmJvbi5zdXBlciIsImFwcGxpY2F0aW9uIjp7Im93bmVyIjoiSmFjay5sYXdAbGl2ZS5jby51ayIsInRpZXJRdW90YVR5cGUiOm51bGwsInRpZXIiOiJVbmxpbWl0ZWQiLCJuYW1lIjoic2l0ZV9zcGVjaWZpYy03NTIyOTlkNS02NWNjLTRmODItOTdlOS0wZDU3YzNiZDcwYzEiLCJpZCI6MzE2NjcsInV1aWQiOiIyMGRiNzMxOC1jMjM5LTQ5NjQtYmQ1MC1iNDcyMGNhOTQ0YzEifSwiaXNzIjoiaHR0cHM6XC9cL2FwaS1tYW5hZ2VyLmFwaS1tYW5hZ2VtZW50Lm1ldG9mZmljZS5jbG91ZDo0NDNcL29hdXRoMlwvdG9rZW4iLCJ0aWVySW5mbyI6eyJ3ZGhfc2l0ZV9zcGVjaWZpY19mcmVlIjp7InRpZXJRdW90YVR5cGUiOiJyZXF1ZXN0Q291bnQiLCJncmFwaFFMTWF4Q29tcGxleGl0eSI6MCwiZ3JhcGhRTE1heERlcHRoIjowLCJzdG9wT25RdW90YVJlYWNoIjp0cnVlLCJzcGlrZUFycmVzdExpbWl0IjowLCJzcGlrZUFycmVzdFVuaXQiOiJzZWMifX0sImtleXR5cGUiOiJQUk9EVUNUSU9OIiwic3Vic2NyaWJlZEFQSXMiOlt7InN1YnNjcmliZXJUZW5hbnREb21haW4iOiJjYXJib24uc3VwZXIiLCJuYW1lIjoiU2l0ZVNwZWNpZmljRm9yZWNhc3QiLCJjb250ZXh0IjoiXC9zaXRlc3BlY2lmaWNcL3YwIiwicHVibGlzaGVyIjoiSmFndWFyX0NJIiwidmVyc2lvbiI6InYwIiwic3Vic2NyaXB0aW9uVGllciI6IndkaF9zaXRlX3NwZWNpZmljX2ZyZWUifV0sInRva2VuX3R5cGUiOiJhcGlLZXkiLCJpYXQiOjE3NjQ1MzE1NjksImp0aSI6IjA4OWQxZjAwLWJjZTUtNGRhNi1iYjIyLTQwZDhjZWRkZTAxMiJ9.IZ5_e_rEtZrkl_Buc4pFETsr-FCz8VWeInJxZ-X7XK31sWxY1dy2uoC4ydO1XTQN2mUHKC_ZO_g9kM8k6k2pyuEY4uciY2Cs1sRrGbQoZX5gICs5ubFJbvJhcCfpqz_3zINtCF8rd3_P4-iQ05BqbUuPrr2lnbqbXTSkv43bBSFDrX5nLFwFynGnEzqO32ulYCFd69VhJC4T0PUIsCAYQLayE4eQhcZYeTVteSGaqbu2vI-MAmDHjcoYXSb_dWQ6mHw2vy6ukCb164u2ji2FC4FYhxo4SVXOCAeV8f-mfky-P8z5CFV7o_OPM_n0MR83--LCstCMyHHoZsasUGnYzw=="; // replace with your key
        const url = `https://data.hub.api.metoffice.gov.uk/sitespecific/v0/point/hourly?latitude=${lat}&longitude=${lng}&includeLocationName=true`;
        const weatherMap = {
            0: "Clear night",
            1: "Sunny day",
            2: "Partly cloudy (night)",
            3: "Partly cloudy (day)",
            5: "Mist",
            6: "Fog",
            7: "Cloudy",
            8: "Overcast",
            9: "Light rain shower (night)",
            10: "Light rain shower (day)",
            11: "Drizzle",
            12: "Light rain",
            13: "Heavy rain shower (night)",
            14: "Heavy rain shower (day)",
            15: "Heavy rain",
            16: "Sleet shower (night)",
            17: "Sleet shower (day)",
            18: "Sleet",
            19: "Hail shower (night)",
            20: "Hail shower (day)",
            21: "Hail",
            22: "Light snow shower (night)",
            23: "Light snow shower (day)",
            24: "Light snow",
            25: "Heavy snow shower (night)",
            26: "Heavy snow shower (day)",
            27: "Heavy snow",
            28: "Thunder shower (night)",
            29: "Thunder shower (day)",
            30: "Thunder"
            };
        fetch(url, {
            headers: { "apikey": apiKey }
        })
        .then(response => response.json())
        .then(data => {
            const forecast = data.features[0].properties.timeSeries[0];
            const temp = Math.round(forecast.screenTemperature);
            const weatherCode = forecast.significantWeatherCode;

            document.getElementById("weather").textContent =
            `${temp}Â°C, ${weatherMap[weatherCode] || "Unknown"}`;
        });
        }
        navigator.geolocation.getCurrentPosition(success);

    function error() {
        document.getElementById("sunrise").textContent = "Location unavailable";
        document.getElementById("sunset").textContent = "Location unavailable";
        }

    function updateTime() {
        const now = new Date();

        // Format: 30 Nov 2025, 18:31:27
        const options = {
            day: 'numeric',
            month: 'short',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        };

        const formatted = now.toLocaleString('en-GB', options);
        document.getElementById("current-time").textContent = formatted;
        }

        // Update immediately, then every second
        updateTime();
        setInterval(updateTime, 1000);    
    </script>
</body>
</html>
